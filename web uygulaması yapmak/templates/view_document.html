{% extends 'base.html' %}

{% block title %}{{ document.title }} - AI Dok√ºman Formatlayƒ±cƒ±{% endblock %}

{% block content %}
    <div class="card">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2 style="color: #1a73e8;">{{ document.title }}</h2>
            <div>
                <button class="btn" style="background-color: #4a9ed8; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; font-weight: bold; color: white;" onclick="printDocument()"><i style="margin-right: 5px;">üñ®Ô∏è</i> Yazdƒ±r</button>
                <button class="btn" style="background-color: #1a73e8; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; font-weight: bold; color: white;" onclick="downloadPDF()"><i style="margin-right: 5px;">üì•</i> PDF ƒ∞ndir</button>
            </div>
        </div>
        
        <div style="margin-top: 20px; padding: 15px; background-color: #e8f0fe; border-radius: 8px; border-left: 4px solid #1a73e8;">
            <p style="margin: 0; font-size: 14px; color: #1a73e8;"><strong>Not:</strong> Bu belge, OpenAI GPT modeliyle otomatik olarak formatlanmƒ±≈ütƒ±r. Payla≈ümadan √∂nce i√ßeriƒüi g√∂zden ge√ßirmeniz √∂nerilir.</p>
        </div>
        
        <div style="display: flex; margin-top: 20px;">
            <div style="flex: 1; padding-right: 10px;">
                <h3 style="color: #1a73e8; font-size: 18px; border-bottom: 1px solid #e0e0e0; padding-bottom: 10px;">Orijinal Metin</h3>
                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; white-space: pre-wrap; font-family: 'Segoe UI', Arial, sans-serif; height: 300px; overflow-y: auto;">
                    {{ document.content }}
                </div>
            </div>
            <div style="flex: 1; padding-left: 10px;">
                <h3 style="color: #1a73e8; font-size: 18px; border-bottom: 1px solid #e0e0e0; padding-bottom: 10px;">Formatlanmƒ±≈ü Belge</h3>
                <div id="document-content" style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); height: 300px; overflow-y: auto; font-family: 'Segoe UI', Arial, sans-serif;">
                    {{ document.formatted_content|safe }}
                </div>
            </div>
        </div>
        
        <div style="margin-top: 20px; display: flex; justify-content: space-between;">
            <div>
                <a href="{{ url_for('dashboard') }}" class="btn" style="background-color: #6c757d; border: none; padding: 8px 16px; border-radius: 4px; text-decoration: none; color: white; font-weight: bold;"><i style="margin-right: 5px;">‚óÄ</i> Kontrol Paneline D√∂n</a>
            </div>
            <div>
                <a href="{{ url_for('delete_document', document_id=document.id) }}" class="btn" style="background-color: #dc3545; border: none; padding: 8px 16px; border-radius: 4px; text-decoration: none; color: white; font-weight: bold;" onclick="return confirm('Bu belgeyi silmek istediƒüinizden emin misiniz? Bu i≈ülem geri alƒ±namaz.');">Belgeyi Sil</a>
            </div>
        </div>
    </div>
    
    <script>
        function printDocument() {
            const content = document.querySelector('#document-content').innerHTML;
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                <head>
                    <title>{{ document.title }}</title>
                    <style>
                        body {
                            font-family: 'Segoe UI', Arial, sans-serif;
                            line-height: 1.6;
                            margin: 40px;
                            color: #333;
                        }
                        h1, h2, h3, h4 {
                            color: #1a73e8;
                        }
                        h1 {
                            font-size: 28px;
                            border-bottom: 2px solid #1a73e8;
                            padding-bottom: 10px;
                        }
                        h2 {
                            font-size: 24px;
                            border-bottom: 1px solid #e0e0e0;
                            padding-bottom: 5px;
                        }
                        h3 {
                            font-size: 20px;
                        }
                        p {
                            margin-bottom: 16px;
                        }
                        ul, ol {
                            margin-left: 20px;
                            margin-bottom: 16px;
                        }
                        li {
                            margin-bottom: 8px;
                        }
                        @media print {
                            body {
                                margin: 20px;
                            }
                        }
                    </style>
                </head>
                <body>
                    <div>${content}</div>
                </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.focus();
            setTimeout(() => {
                printWindow.print();
            }, 500);
        }
        
        function downloadPDF() {
            window.location.href = "{{ url_for('download_document', document_id=document.id) }}";
        }
    </script>
{% endblock %} 