{% extends 'base.html' %}

{% block title %}Kontrol Paneli - Getbelge{% endblock %}

{% block page_content %}
    <div class="card">
        <h2 style="color: #1a73e8; margin-top: 0;">Ho≈ü Geldin, {{ user.username }}!</h2>
        <p>Kontrol panelinizde olu≈üturduƒüunuz t√ºm CV'leri ve PDF belgelerinizi g√∂r√ºnt√ºleyebilir, d√ºzenleyebilir ve y√∂netebilirsiniz.</p>
        
        <!-- Ana √ñzellikler -->
        <div style="display: flex; flex-wrap: wrap; gap: 20px; margin: 30px 0;">
            <!-- CV Olu≈üturma Kartƒ± -->
            <div style="flex: 1; min-width: 300px; background-color: #e8f0fe; border-radius: 8px; padding: 20px; border-left: 4px solid #4CAF50; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
                <div style="display: flex; align-items: center; margin-bottom: 15px;">
                    <div style="width: 40px; height: 40px; background-color: #4CAF50; border-radius: 50%; display: flex; justify-content: center; align-items: center; margin-right: 15px;">
                        <span style="color: white; font-size: 20px;">üìÑ</span>
                    </div>
                    <h3 style="margin: 0; color: #4CAF50;">CV Olu≈üturma</h3>
                </div>
                <p>OpenAI yapay zeka ile ATS uyumlu, profesyonel CV'ler olu≈üturun. ƒ∞≈ü ba≈üvurularƒ±nƒ±zda bir adƒ±m √∂ne ge√ßin.</p>
                <a href="{{ url_for('create_resume') }}" class="btn" style="background-color: #4CAF50; border: none; padding: 10px 16px; border-radius: 4px; text-decoration: none; color: white; font-weight: bold; display: inline-block; margin-top: 10px;">Yeni CV Olu≈ütur</a>
            </div>
            
            <!-- PDF Belge Olu≈üturma Kartƒ± -->
            <div style="flex: 1; min-width: 300px; background-color: #e8f0fe; border-radius: 8px; padding: 20px; border-left: 4px solid #1a73e8; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
                <div style="display: flex; align-items: center; margin-bottom: 15px;">
                    <div style="width: 40px; height: 40px; background-color: #1a73e8; border-radius: 50%; display: flex; justify-content: center; align-items: center; margin-right: 15px;">
                        <span style="color: white; font-size: 20px;">üìù</span>
                    </div>
                    <h3 style="margin: 0; color: #1a73e8;">PDF Belge Olu≈üturma</h3>
                </div>
                <p>Metninizi profesyonel formatta d√ºzenleyin ve PDF olarak kaydedin. Raporlar, makaleler ve diƒüer belgeler i√ßin ideal.</p>
                <a href="{{ url_for('create_document') }}" class="btn" style="background-color: #1a73e8; border: none; padding: 10px 16px; border-radius: 4px; text-decoration: none; color: white; font-weight: bold; display: inline-block; margin-top: 10px;">Yeni Belge Olu≈ütur</a>
            </div>
        </div>
        
        <div style="background-color: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
            <h3 style="margin-top: 0; color: #1a73e8; font-size: 18px;">ƒ∞statistikler</h3>
            <div style="display: flex; justify-content: space-between; text-align: center; flex-wrap: wrap;">
                <div style="flex: 1; padding: 15px; background-color: white; margin-right: 10px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); min-width: 150px; margin-bottom: 10px;">
                    <h4 style="margin: 0; color: #555;">Toplam CV</h4>
                    <p style="font-size: 24px; font-weight: bold; margin: 10px 0 0 0; color: #4CAF50;">{{ resumes|length }}</p>
                </div>
                <div style="flex: 1; padding: 15px; background-color: white; margin-right: 10px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); min-width: 150px; margin-bottom: 10px;">
                    <h4 style="margin: 0; color: #555;">Toplam Belge</h4>
                    <p style="font-size: 24px; font-weight: bold; margin: 10px 0 0 0; color: #1a73e8;">{{ documents|length }}</p>
                </div>
                <div style="flex: 1; padding: 15px; background-color: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); min-width: 150px; margin-bottom: 10px;">
                    <h4 style="margin: 0; color: #555;">Son G√ºncelleme</h4>
                    <p style="font-size: 16px; margin: 10px 0 0 0; color: #666;">
                        {% if resumes or documents %}
                            Bug√ºn
                        {% else %}
                            -
                        {% endif %}
                    </p>
                </div>
            </div>
        </div>
        
        <!-- CV Sekmeleri -->
        <div style="margin-top: 30px;">
            <ul class="nav nav-tabs" id="myTab" role="tablist" style="display: flex; border-bottom: 1px solid #dee2e6; margin-bottom: 15px; padding: 0; list-style-type: none;">
                <li style="margin-right: 5px;">
                    <a class="nav-link active" id="cv-tab" data-toggle="tab" href="#cv" role="tab" aria-controls="cv" aria-selected="true" style="display: inline-block; padding: 10px 15px; border: 1px solid transparent; border-top-left-radius: 4px; border-top-right-radius: 4px; border-color: #dee2e6 #dee2e6 #fff; color: #4CAF50; font-weight: bold; text-decoration: none; position: relative; top: 1px; background-color: #fff;">CV'leriniz</a>
                </li>
                <li>
                    <a class="nav-link" id="doc-tab" data-toggle="tab" href="#doc" role="tab" aria-controls="doc" aria-selected="false" style="display: inline-block; padding: 10px 15px; border: 1px solid transparent; border-top-left-radius: 4px; border-top-right-radius: 4px; color: #1a73e8; text-decoration: none;">PDF Belgeleriniz</a>
                </li>
            </ul>
            
            <div class="tab-content" id="myTabContent">
                <!-- CV Tablosu -->
                <div class="tab-pane fade show active" id="cv" role="tabpanel" aria-labelledby="cv-tab">
                    {% if resumes %}
                        <div style="overflow-x: auto;">
                            <table style="width:100%; border-collapse: collapse; box-shadow: 0 2px 4px rgba(0,0,0,0.05); border-radius: 8px; overflow: hidden;">
                                <thead>
                                    <tr style="background-color: #f8f9fa;">
                                        <th style="border: 1px solid #e9ecef; padding: 12px; text-align: left; color: #495057;">Ba≈ülƒ±k</th>
                                        <th style="border: 1px solid #e9ecef; padding: 12px; text-align: left; color: #495057;">Olu≈üturma Tarihi</th>
                                        <th style="border: 1px solid #e9ecef; padding: 12px; text-align: left; color: #495057;">ƒ∞≈ülemler</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for resume in resumes %}
                                        <tr style="{% if loop.index % 2 == 0 %}background-color: #f8f9fa;{% endif %}">
                                            <td style="border: 1px solid #e9ecef; padding: 12px;">{{ resume.title }}</td>
                                            <td style="border: 1px solid #e9ecef; padding: 12px;">Bug√ºn</td>
                                            <td style="border: 1px solid #e9ecef; padding: 12px;">
                                                <a href="{{ url_for('view_resume', resume_id=resume.id) }}" class="btn" style="background-color: #4CAF50; border: none; padding: 6px 12px; border-radius: 4px; text-decoration: none; color: white; font-size: 14px; margin-right: 5px;">G√∂r√ºnt√ºle</a>
                                                <a href="{{ url_for('delete_resume', resume_id=resume.id) }}" class="btn" style="background-color: #dc3545; border: none; padding: 6px 12px; border-radius: 4px; text-decoration: none; color: white; font-size: 14px;" onclick="return confirm('Bu CV\'yi silmek istediƒüinizden emin misiniz? Bu i≈ülem geri alƒ±namaz.');">Sil</a>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <div style="text-align: center; padding: 30px; background-color: #f8f9fa; border-radius: 8px;">
                            <div style="font-size: 48px; color: #ccc; margin-bottom: 10px;">üìÑ</div>
                            <p style="font-size: 18px; color: #666; margin-bottom: 20px;">Hen√ºz hi√ß CV olu≈üturmadƒ±nƒ±z.</p>
                            <a href="{{ url_for('create_resume') }}" class="btn" style="background-color: #4CAF50; border: none; padding: 8px 16px; border-radius: 4px; text-decoration: none; color: white; font-weight: bold;">ƒ∞lk CV'nizi Olu≈üturun</a>
                        </div>
                    {% endif %}
                </div>
                
                <!-- Belgeler Tablosu -->
                <div class="tab-pane fade" id="doc" role="tabpanel" aria-labelledby="doc-tab" style="display: none;">
                    {% if documents %}
                        <div style="overflow-x: auto;">
                            <table style="width:100%; border-collapse: collapse; box-shadow: 0 2px 4px rgba(0,0,0,0.05); border-radius: 8px; overflow: hidden;">
                                <thead>
                                    <tr style="background-color: #f8f9fa;">
                                        <th style="border: 1px solid #e9ecef; padding: 12px; text-align: left; color: #495057;">Ba≈ülƒ±k</th>
                                        <th style="border: 1px solid #e9ecef; padding: 12px; text-align: left; color: #495057;">Olu≈üturma Tarihi</th>
                                        <th style="border: 1px solid #e9ecef; padding: 12px; text-align: left; color: #495057;">ƒ∞≈ülemler</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for document in documents %}
                                        <tr style="{% if loop.index % 2 == 0 %}background-color: #f8f9fa;{% endif %}">
                                            <td style="border: 1px solid #e9ecef; padding: 12px;">{{ document.title }}</td>
                                            <td style="border: 1px solid #e9ecef; padding: 12px;">{{ document.created_at.strftime('%d.%m.%Y') if document.created_at else 'Bug√ºn' }}</td>
                                            <td style="border: 1px solid #e9ecef; padding: 12px;">
                                                <a href="{{ url_for('view_document', document_id=document.id) }}" class="btn" style="background-color: #1a73e8; border: none; padding: 6px 12px; border-radius: 4px; text-decoration: none; color: white; font-size: 14px; margin-right: 5px;">G√∂r√ºnt√ºle</a>
                                                <a href="{{ url_for('delete_document', document_id=document.id) }}" class="btn" style="background-color: #dc3545; border: none; padding: 6px 12px; border-radius: 4px; text-decoration: none; color: white; font-size: 14px;" onclick="return confirm('Bu belgeyi silmek istediƒüinizden emin misiniz? Bu i≈ülem geri alƒ±namaz.');">Sil</a>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <div style="text-align: center; padding: 30px; background-color: #f8f9fa; border-radius: 8px;">
                            <div style="font-size: 48px; color: #ccc; margin-bottom: 10px;">üìù</div>
                            <p style="font-size: 18px; color: #666; margin-bottom: 20px;">Hen√ºz hi√ß PDF belge olu≈üturmadƒ±nƒ±z.</p>
                            <a href="{{ url_for('create_document') }}" class="btn" style="background-color: #1a73e8; border: none; padding: 8px 16px; border-radius: 4px; text-decoration: none; color: white; font-weight: bold;">ƒ∞lk PDF Belgenizi Olu≈üturun</a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    
    <!-- ƒ∞pu√ßlarƒ± B√∂l√ºm√º -->
    <div class="card">
        <h3 style="color: #1a73e8; margin-top: 0;">Yararlƒ± ƒ∞pu√ßlarƒ±</h3>
        <div style="display: flex; flex-wrap: wrap; gap: 20px;">
            <div style="flex: 1; min-width: 300px;">
                <div style="position: relative; padding-left: 20px; margin-bottom: 15px;">
                    <h4 style="margin-top: 0; color: #4CAF50; position: relative;">
                        <span style="position: absolute; left: -20px; top: 5px; width: 10px; height: 10px; background-color: #4CAF50; border-radius: 50%;"></span>
                        CV Hazƒ±rlama ƒ∞pu√ßlarƒ±
                    </h4>
                    <ul style="list-style-type: none; padding-left: 0;">
                        <li style="position: relative; padding-left: 20px; margin-bottom: 8px;">
                            <span style="position: absolute; left: 0; top: 8px; width: 6px; height: 6px; background-color: #4CAF50; border-radius: 50%;"></span>
                            <strong>Kƒ±sa ve √∂z olun:</strong> CV'niz en fazla 2 sayfa olmalƒ±.
                        </li>
                        <li style="position: relative; padding-left: 20px; margin-bottom: 8px;">
                            <span style="position: absolute; left: 0; top: 8px; width: 6px; height: 6px; background-color: #4CAF50; border-radius: 50%;"></span>
                            <strong>Anahtar kelimelere √∂nem verin:</strong> ƒ∞≈ü ilanƒ±ndaki anahtar kelimeleri CV'nizde kullanƒ±n.
                        </li>
                        <li style="position: relative; padding-left: 20px; margin-bottom: 8px;">
                            <span style="position: absolute; left: 0; top: 8px; width: 6px; height: 6px; background-color: #4CAF50; border-radius: 50%;"></span>
                            <strong>Ba≈üarƒ±larƒ±nƒ±zƒ± vurgulayƒ±n:</strong> Somut √∂rnekler ve istatistikler kullanƒ±n.
                        </li>
                    </ul>
                </div>
            </div>
            
            <div style="flex: 1; min-width: 300px;">
                <div style="position: relative; padding-left: 20px;">
                    <h4 style="color: #1a73e8; position: relative; margin-top: 0;">
                        <span style="position: absolute; left: -20px; top: 5px; width: 10px; height: 10px; background-color: #1a73e8; border-radius: 50%;"></span>
                        PDF Belge D√ºzenleme ƒ∞pu√ßlarƒ±
                    </h4>
                    <ul style="list-style-type: none; padding-left: 0;">
                        <li style="position: relative; padding-left: 20px; margin-bottom: 8px;">
                            <span style="position: absolute; left: 0; top: 8px; width: 6px; height: 6px; background-color: #1a73e8; border-radius: 50%;"></span>
                            <strong>Yapƒ± √∂nemlidir:</strong> Belgelerinizi mantƒ±klƒ± b√∂l√ºmlere ayƒ±rƒ±n.
                        </li>
                        <li style="position: relative; padding-left: 20px; margin-bottom: 8px;">
                            <span style="position: absolute; left: 0; top: 8px; width: 6px; height: 6px; background-color: #1a73e8; border-radius: 50%;"></span>
                            <strong>Dil kullanƒ±mƒ±:</strong> Anla≈üƒ±lƒ±r ve profesyonel bir dil kullanƒ±n.
                        </li>
                        <li style="position: relative; padding-left: 20px; margin-bottom: 8px;">
                            <span style="position: absolute; left: 0; top: 8px; width: 6px; height: 6px; background-color: #1a73e8; border-radius: 50%;"></span>
                            <strong>≈ûekil ve g√∂rsel:</strong> Grafikler, tablolar ve listeler kullanarak belgenizi daha okunaklƒ± hale getirin.
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Tab ge√ßi≈ülerini y√∂net
        document.addEventListener('DOMContentLoaded', function() {
            const cvTab = document.getElementById('cv-tab');
            const docTab = document.getElementById('doc-tab');
            const cvPanel = document.getElementById('cv');
            const docPanel = document.getElementById('doc');
            
            cvTab.addEventListener('click', function(e) {
                e.preventDefault();
                // Tab linklerini g√ºncelle
                cvTab.classList.add('active');
                cvTab.setAttribute('aria-selected', 'true');
                cvTab.style.borderColor = '#dee2e6 #dee2e6 #fff';
                cvTab.style.backgroundColor = '#fff';
                cvTab.style.color = '#4CAF50';
                cvTab.style.fontWeight = 'bold';
                cvTab.style.position = 'relative';
                cvTab.style.top = '1px';
                
                docTab.classList.remove('active');
                docTab.setAttribute('aria-selected', 'false');
                docTab.style.borderColor = 'transparent';
                docTab.style.backgroundColor = 'transparent';
                docTab.style.color = '#1a73e8';
                docTab.style.fontWeight = 'normal';
                docTab.style.position = 'static';
                
                // Panel i√ßeriklerini g√ºncelle
                cvPanel.classList.add('show', 'active');
                cvPanel.style.display = 'block';
                docPanel.classList.remove('show', 'active');
                docPanel.style.display = 'none';
            });
            
            docTab.addEventListener('click', function(e) {
                e.preventDefault();
                // Tab linklerini g√ºncelle
                docTab.classList.add('active');
                docTab.setAttribute('aria-selected', 'true');
                docTab.style.borderColor = '#dee2e6 #dee2e6 #fff';
                docTab.style.backgroundColor = '#fff';
                docTab.style.color = '#1a73e8';
                docTab.style.fontWeight = 'bold';
                docTab.style.position = 'relative';
                docTab.style.top = '1px';
                
                cvTab.classList.remove('active');
                cvTab.setAttribute('aria-selected', 'false');
                cvTab.style.borderColor = 'transparent';
                cvTab.style.backgroundColor = 'transparent';
                cvTab.style.color = '#4CAF50';
                cvTab.style.fontWeight = 'normal';
                cvTab.style.position = 'static';
                
                // Panel i√ßeriklerini g√ºncelle
                docPanel.classList.add('show', 'active');
                docPanel.style.display = 'block';
                cvPanel.classList.remove('show', 'active');
                cvPanel.style.display = 'none';
            });
        });
    </script>
{% endblock %} 